<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${isEdit} ? '编辑期刊' : '添加期刊'">期刊表单 - 期刊分析系统</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
        }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f8f9fa;
        }
        .navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        .page-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 40px 0;
            margin-bottom: 30px;
        }
        .form-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        footer {
            background-color: var(--primary-color);
            color: white;
            padding: 30px 0;
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" th:href="@{/}">
                <i class="fas fa-book-open me-2"></i>期刊分析系统
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/}">首页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/journals}">期刊库</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- 页面头部 -->
    <section class="page-header">
        <div class="container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/}" class="text-white-50">首页</a></li>
                    <li class="breadcrumb-item"><a th:href="@{/journals}" class="text-white-50">期刊库</a></li>
                    <li class="breadcrumb-item active text-white" th:text="${isEdit} ? '编辑期刊' : '添加期刊'">操作</li>
                </ol>
            </nav>
            <h1>
                <i class="fas" th:classappend="${isEdit} ? 'fa-edit' : 'fa-plus-circle'"></i>
                <span th:text="${isEdit} ? '编辑期刊' : '添加期刊'">操作</span>
            </h1>
        </div>
    </section>

    <!-- 主要内容 -->
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card form-card">
                    <div class="card-body p-4">
                        <form th:action="${isEdit} ? @{/journal/edit/{id}(id=${journal.id})} : @{/journal/add}" 
                              method="post">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">期刊名称 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="name" 
                                           th:value="${journal != null ? journal.name : ''}" required placeholder="请输入期刊名称">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">ISSN <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="issn" 
                                           th:value="${journal != null ? journal.issn : ''}" required placeholder="如：1234-5678">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">出版商</label>
                                    <input type="text" class="form-control" name="publisher" 
                                           th:value="${journal != null ? journal.publisher : ''}" placeholder="请输入出版商名称">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">国家/地区</label>
                                    <select class="form-select" name="country">
                                        <option value="">请选择</option>
                                        <option value="中国" th:selected="${journal != null and journal.country == '中国'}">中国</option>
                                        <option value="美国" th:selected="${journal != null and journal.country == '美国'}">美国</option>
                                        <option value="英国" th:selected="${journal != null and journal.country == '英国'}">英国</option>
                                        <option value="德国" th:selected="${journal != null and journal.country == '德国'}">德国</option>
                                        <option value="日本" th:selected="${journal != null and journal.country == '日本'}">日本</option>
                                        <option value="法国" th:selected="${journal != null and journal.country == '法国'}">法国</option>
                                        <option value="其他" th:selected="${journal != null and journal.country == '其他'}">其他</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">语言</label>
                                    <select class="form-select" name="language">
                                        <option value="">请选择</option>
                                        <option value="中文" th:selected="${journal != null and journal.language == '中文'}">中文</option>
                                        <option value="英文" th:selected="${journal != null and journal.language == '英文'}">英文</option>
                                        <option value="中英双语" th:selected="${journal != null and journal.language == '中英双语'}">中英双语</option>
                                        <option value="其他" th:selected="${journal != null and journal.language == '其他'}">其他</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">学科分类</label>
                                    <select class="form-select" name="category">
                                        <option value="">请选择</option>
                                        <option value="计算机科学" th:selected="${journal != null and journal.category == '计算机科学'}">计算机科学</option>
                                        <option value="医学" th:selected="${journal != null and journal.category == '医学'}">医学</option>
                                        <option value="物理学" th:selected="${journal != null and journal.category == '物理学'}">物理学</option>
                                        <option value="化学" th:selected="${journal != null and journal.category == '化学'}">化学</option>
                                        <option value="生物学" th:selected="${journal != null and journal.category == '生物学'}">生物学</option>
                                        <option value="经济学" th:selected="${journal != null and journal.category == '经济学'}">经济学</option>
                                        <option value="管理学" th:selected="${journal != null and journal.category == '管理学'}">管理学</option>
                                        <option value="工程技术" th:selected="${journal != null and journal.category == '工程技术'}">工程技术</option>
                                        <option value="综合" th:selected="${journal != null and journal.category == '综合'}">综合</option>
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">影响因子</label>
                                    <input type="number" step="0.001" class="form-control" name="impactFactor" 
                                           th:value="${journal != null ? journal.impactFactor : ''}" placeholder="如：3.456">
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">出版频率</label>
                                    <select class="form-select" name="frequency">
                                        <option value="">请选择</option>
                                        <option value="月刊" th:selected="${journal != null and journal.frequency == '月刊'}">月刊</option>
                                        <option value="双月刊" th:selected="${journal != null and journal.frequency == '双月刊'}">双月刊</option>
                                        <option value="季刊" th:selected="${journal != null and journal.frequency == '季刊'}">季刊</option>
                                        <option value="半年刊" th:selected="${journal != null and journal.frequency == '半年刊'}">半年刊</option>
                                        <option value="年刊" th:selected="${journal != null and journal.frequency == '年刊'}">年刊</option>
                                        <option value="不定期" th:selected="${journal != null and journal.frequency == '不定期'}">不定期</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">官方网站</label>
                                    <input type="url" class="form-control" name="officialUrl" 
                                           th:value="${journal != null ? journal.officialUrl : ''}" placeholder="https://example.com">
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">期刊简介</label>
                                <textarea class="form-control" name="description" rows="5" 
                                          th:text="${journal != null ? journal.description : ''}" placeholder="请输入期刊简介..."></textarea>
                            </div>
                            
                            <div class="d-flex justify-content-between">
                                <a th:href="@{/journals}" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left me-1"></i>返回列表
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i>
                                    <span th:text="${isEdit} ? '保存修改' : '添加期刊'">提交</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 页脚 -->
    <footer>
        <div class="container text-center">
            <p class="mb-0">期刊分析系统 - Journal Analysis System</p>
        </div>
    </footer>

    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
